(()=>{"use strict";const e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button-submit",inactiveButtonClass:"popup__button-submit_invalid",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},t=(document.querySelector(".gallery"),document.querySelector(".profile__button")),s=document.querySelector(".profile__title"),i=document.querySelector(".profile__info"),o=document.querySelector(".profile__img"),r=document.querySelector(".profile__edit-avatar-button"),n=document.querySelector(".profile__button-plus"),a=(document.querySelector(".popup_type_profile"),document.querySelector(".popup_type_img"),document.querySelector(".popup_type_card-add"),document.querySelector(".popup__img"),document.querySelector(".popup__title-img"),document.forms.editForm),l=document.forms.addForm,_=document.forms.editAvatarForm;document.querySelector(".popup__form_profile"),document.querySelector(".popup__form_card-add"),document.querySelector(".popup__form_avatar"),document.querySelector(".popup__input_form-name"),document.querySelector(".popup__input_form-about"),document.querySelector(".popup__input_img-name"),document.querySelector(".popup__input_img-link"),document.querySelector(".popup__button-close_profile"),document.querySelector(".popup__button-close_add-card"),document.querySelector(".popup__button-close_big-img");class u{constructor(e,t,s,i,o,r,n){this._templateSelector=t,this._handleCardClick=s,this._likes=e.likes,this._id=e._id,this._name=e.name,this._link=e.link,this._ownerId=e.owner._id,this._userId=i,this._like=o,this._dislike=r,this._deleteCard=n}like(){this._likeButton.classList.add("gallery__like_active")}dislike(){this._likeButton.classList.remove("gallery__like_active")}setLikesCount(e){this._setLikesCount.textContent=`${e.likes.length}`}_checkLIikes(){this._likes.forEach((e=>{e._id===this._userId?this.like():this.dislike()}))}remove(){this._cardElement.remove()}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._likeButton.classList.contains("gallery__like_active")?this._dislike():this._like()})),this._deleteButtonTrash.addEventListener("click",(()=>{this._deleteCard(this._id)})),this._imageElementMask.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}getView=()=>{const e=document.querySelector(this._templateSelector);if(e){const t=e.content.querySelector(".gallery__item");t?this._cardElement=t.cloneNode(!0):console.log("В классе Card не найден .gallery__item!")}else console.log("В классе Card не найден "+this._templateSelector+"!");return this._likeButton=this._cardElement.querySelector(".gallery__like"),this._setLikesCount=this._cardElement.querySelector(".gallery__count-like"),this._setLikesCount.textContent=this._likes.length,this._deleteButtonTrash=this._cardElement.querySelector(".gallery__del"),this._ownerId!==this._userId&&this._deleteButtonTrash.remove(),this._imageElementMask=this._cardElement.querySelector(".gallery__img"),this._imageElementMask.src=this._link,this._imageElementMask.alt=this._name,this._cardElement.querySelector(".gallery__title").textContent=this._name,this._setEventListeners(),this._checkLIikes(),this._cardElement}}class c{constructor(e,t){this._form=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputElement=Array.from(this._form.querySelectorAll(this._inputSelector)),this._button=this._form.querySelector(this._submitButtonSelector)}_showInputError=(e,t)=>{const s=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)};_hideInputError=e=>{const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)};_checkInputValidity=e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)};_hasInvalidInput(){return this._inputElement.some((e=>!e.validity.valid))}disableSubmitButton(){this._button.classList.add(this._inactiveButtonClass),this._button.disabled=!0}_enableSubmitButton(){this._button.classList.remove(this._inactiveButtonClass),this._button.disabled=!1}_toggleButtonState=()=>{this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()};_setEventListeners=()=>{this._toggleButtonState(),this._inputElement.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))};enableValidation(){this._setEventListeners()}}class h{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&!(e.ctrlKey||e.altKey||e.shiftKey)&&this._popup.classList.contains("popup_opened")&&this.close()}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{e.target.classList.contains("popup__button-close")&&this.close(),e.target.classList.contains("popup_opened")&&this.close()}))}}class p extends h{constructor(e,t){super(e),this._callbackSubmit=t,this._form=this._popup.querySelector(".popup__form"),this._inputElements=this._form.querySelectorAll(".popup__input"),this._button=this._form.querySelector(".popup__button-submit")}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault();const t=e.submitter.textContent;e.submitter.textContent="Сохранение...",this._callbackSubmit(this._getInputValues()).then((()=>this.close())).finally((()=>{e.submitter.textContent=t}))}))}_getInputValues(){const e={};return this._inputElements.forEach((t=>{e[t.name]=t.value})),e}setInputValue(e){this._inputElements.forEach((t=>{t.value=e[t.name]}))}close(){super.close(),this._form.reset()}}let d;const m=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_handleResponse(e){return e.ok?Promise.resolve(e.json()):Promise.reject(`Ошибка: ${e.status}`)}async editProfileUserApi(e){const t=await fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})});return this._handleResponse(t)}async getRealUserInfo(){const e=await fetch(`${this._baseUrl}/users/me`,{headers:this._headers});return this._handleResponse(e)}async getInitialCards(){const e=await fetch(`${this._baseUrl}/cards`,{headers:this._headers});return this._handleResponse(e)}async createNewCardApi(e){const t=await fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)});return this._handleResponse(t)}async removeCard(e){const t=await fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers});return this._handleResponse(t)}async addLike(e){const t=await fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers});return this._handleResponse(t)}async removeLike(e){const t=await fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers});return this._handleResponse(t)}async updateProfileUserAvatar(e){const t=await fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})});return this._handleResponse(t)}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"ea996ec4-3586-49ec-99cf-46c56e637a89","Content-Type":"application/json"}});function y(e){const t=new u(e,"#template-new-img",b,d,(async()=>{try{const s=await m.addLike(e._id);t.like(),t.setLikesCount(s)}catch(e){return console.log(`Ошибка: ${e}`)}}),(async()=>{try{const s=await m.removeLike(e._id);t.dislike(),t.setLikesCount(s)}catch(e){return console.log(`Ошибка: ${e}`)}}),(()=>{q.open(t)}));return t.getView()}function b(e,t){v.open(e,t)}const v=new class extends h{constructor(e){super(e),this._popupImage=this._popup.querySelector(".popup__img"),this._popupImageTitle=this._popup.querySelector(".popup__title-img")}open(e,t){this._popupImageTitle.textContent=e,this._popupImage.src=t,this._popupImage.alt=e,super.open()}}(".popup_type_img"),f=new p(".popup_type_card-add",(async function(e){try{const t=await m.createNewCardApi(e);I.addItem(y(t))}catch(e){console.log(`Ошибка: ${e}`)}})),S=new p(".popup_type_profile",(async function(e){try{const t=await m.editProfileUserApi(e);g.setUserInfo(t)}catch(e){console.log(`Ошибка: ${e}`)}})),E=new p(".popup_type_update-avatar",(async function(e){try{const t=await m.updateProfileUserAvatar(e);g.setUserInfo(t)}catch(e){console.log(`Ошибка: ${e}`)}})),g=new class{constructor({name:e,about:t,avatar:s}){this._data={name:e.textContent,about:t.textContent,avatar:s.textContent},this._name=e,this._about=t,this._avatar=s}getUserInfo(){return{name:this._data.name,about:this._data.about,avatar:this._data.avatar}}setUserInfo(e){this._data.name=e.name,this._data.about=e.about,this._data.avatar=e.avatar,e.name&&(this._name.textContent=this._data.name),e.about&&(this._about.textContent=this._data.about),e.avatar&&(this._avatar.src=this._data.avatar,this._avatar.alt=this._data.name)}}({name:s,about:i,avatar:o});t.addEventListener("click",(()=>{S.open(),S.setInputValue(g.getUserInfo()),k.disableSubmitButton()}),!1),r.addEventListener("click",(()=>{E.open(),L.disableSubmitButton()}),!1),n.addEventListener("click",(()=>{f.open(),C.disableSubmitButton()}),!1);const k=new c(e,a),C=new c(e,l),L=new c(e,_);k.enableValidation(),C.enableValidation(),L.enableValidation();const q=new class extends h{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popup.querySelector(".popup__form")}open(e){this._card=e,super.open()}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._card)}))}}(".popup_type_delete-card",(async e=>{m.removeCard(e._id).then((()=>{e.remove(),q.close()})).catch((e=>console.log(`Ошибка: ${e}`)))}));q.setEventListeners(),f.setEventListeners(),S.setEventListeners(),E.setEventListeners(),v.setEventListeners();const I=new class{constructor({renderer:e},t){this._renderer=e,this._container=document.querySelector(t)}addItem=e=>{this._container.prepend(e)};renderItems(e){e.reverse().forEach((e=>this._renderer(e)))}}({renderer:e=>{const t=y(e);I.addItem(t)}},".gallery");Promise.all([m.getRealUserInfo(),m.getInitialCards()]).then((([e,t])=>{g.setUserInfo(e),d=e._id,I.renderItems(t)})).catch((e=>console.log(`Ошибка: ${e}`)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eUIsSUFDVHpLLEtBQUt3SyxXQUFXRSxRQUFRRCxFQUFLLEVBRy9CRSxZQUFZQyxHQUNWQSxFQUFNQyxVQUFVbkosU0FBUytJLEdBQ2hCekssS0FBS3VLLFVBQVVFLElBRTFCLEdMbUtBLENBQ0VKLFNBQVc1SyxJQUNULE1BQU0wSSxFQUFPRCxFQUFXekksR0FFeEJzSixFQUFTQyxRQUFRYixFQUFLLEdBRzFCLFlBSUZqQixRQUFRNEQsSUFBSSxDQUFDcEUsRUFBSXFFLGtCQUFtQnJFLEVBQUlzRSxvQkFDckM1RSxNQUFLLEVBQUU4QyxFQUFhK0IsTUFDbkI3QixFQUFLQyxZQUFZSCxHQUNqQnRKLEVBQVNzSixFQUFZN0ksSUFDckIwSSxFQUFTNEIsWUFBWU0sRUFBTSxJQUc1QmIsT0FBTzlCLEdBQVUvRixRQUFRQyxJQUFLLFdBQVU4RixNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLCAvL9GE0L7RgNC80LBcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsIC8v0LjQvdC/0YPRglxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvbi1zdWJtaXRcIiwgLy/QutC90L7Qv9C60LBcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uLXN1Ym1pdF9pbnZhbGlkXCIsIC8v0L3QtdCw0LrRgtC40LLQvdCw0Y8g0LrQvdC+0L/QutCwXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLCAvL9C/0L7QtNGH0LXRgNC60LjQstCw0L3QuNC1INC60YDQsNGB0L3Ri9C8INC/0YDQuCDQvtGI0LjQsdC60LVcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZXJyb3JfdmlzaWJsZVwiLCAvL9C/0L7QutCw0LfQsNGC0Ywg0L7RiNC40LHQutGDINC/0YDQuCDQvdC10LLQtdGA0L3QviDQt9Cw0L/QvtC70L3QtdC90L7QvCDQv9C+0LvQtVxufTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwQ29uZmlnID0ge1xuICBwb3B1cEVkaXRTZWxlY3RvcjogXCIucG9wdXBfdHlwZV9wcm9maWxlXCIsXG4gIHBvcHVwQWRkQ2FyZFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlX2NhcmQtYWRkXCIsXG4gIHBvcHVwSW1hZ2VTZWxlY3RvcjogXCIucG9wdXBfdHlwZV9pbWdcIixcbiAgcG9wdXBVcGRhdGVBdmF0YXJTZWxlY3RvcjogXCIucG9wdXBfdHlwZV91cGRhdGUtYXZhdGFyXCIsXG4gIHBvcHVwRGVsZXRlU2VsZWN0b3I6IFwiLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmRcIixcbn07XG5cbmV4cG9ydCBjb25zdCBnYWxsZXJ5Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5XCIpO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm9cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1nXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucHJvZmlsZV9fZWRpdC1hdmF0YXItYnV0dG9uXCJcbik7XG5leHBvcnQgY29uc3QgYnV0dG9uT3BlbmVGb3JtQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2J1dHRvbi1wbHVzXCJcbik7XG5cbmV4cG9ydCBjb25zdCBwb3B1cFR5cGVQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX3Byb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgcG9wdXBDYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfaW1nXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9jYXJkLWFkZFwiKTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWdcIik7XG5leHBvcnQgY29uc3QgcG9wdXBUaXRsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fdGl0bGUtaW1nXCIpO1xuXG4vL9C90LDRhdC+0LTQuNC8INGE0L7RgNC80YMg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9C+INC10LUgbmFtZVxuZXhwb3J0IGNvbnN0IGZvcm1FZGl0UHJvZmlsZSA9IGRvY3VtZW50LmZvcm1zLmVkaXRGb3JtO1xuXG4vL9C90LDRhdC+0LTQuNC8INGE0L7RgNC80YMg0YHQvtC30LTQsNC90LjRjyDQutCw0YDRgtC+0YfQtdC6INC/0L4g0LXQtSBuYW1lXG5leHBvcnQgY29uc3QgZm9ybUFkZFByb2ZpbGUgPSBkb2N1bWVudC5mb3Jtcy5hZGRGb3JtO1xuXG4vL9C90LDRhdC+0LTQuNC8INGE0L7RgNC80YMg0L7QsdC90L7QstC70LXQvdC40Y8g0LDQstCw0YLQsNGA0LAg0L/QviDQtdC1IG5hbWVcbmV4cG9ydCBjb25zdCBmb3JtVXBkYXRlQXZhdGFyID0gZG9jdW1lbnQuZm9ybXMuZWRpdEF2YXRhckZvcm07XG5cbmV4cG9ydCBjb25zdCBwb3B1cEZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV9wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwRm9ybVBsYWNlUGx1c2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fZm9ybV9jYXJkLWFkZFwiXG4pO1xuZXhwb3J0IGNvbnN0IHBvcHVwRm9ybUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fYXZhdGFyXCIpO1xuXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfZm9ybS1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGFib3V0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF9mb3JtLWFib3V0XCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfaW1nLW5hbWVcIik7XG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZUxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF9pbWctbGlua1wiKTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwQnV0dG9uQ2xvc2VQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2J1dHRvbi1jbG9zZV9wcm9maWxlXCJcbik7XG5leHBvcnQgY29uc3QgcG9wdXBCdXR0b25DbG9zZUFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fYnV0dG9uLWNsb3NlX2FkZC1jYXJkXCJcbik7XG5leHBvcnQgY29uc3QgcG9wdXBCdXR0b25DbG9zZVBsYWNlSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2J1dHRvbi1jbG9zZV9iaWctaW1nXCJcbik7XG4iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGEsXG4gICAgdGVtcGxhdGVTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgdXNlcklkLFxuICAgIGxpa2UsXG4gICAgZGlzbGlrZSxcbiAgICBkZWxldGVDYXJkXG4gICkge1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDsgLy9jYXJkIGlkXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDsgLy9pZCBvZiB0aGUgY2FyZCBjcmVhdG9yXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkOyAvL21lIGlkXG4gICAgdGhpcy5fbGlrZSA9IGxpa2U7XG4gICAgdGhpcy5fZGlzbGlrZSA9IGRpc2xpa2U7XG4gICAgdGhpcy5fZGVsZXRlQ2FyZCA9IGRlbGV0ZUNhcmQ7XG5cbiAgfVxuXG4gIC8vYWRkIGxpa2VcbiAgbGlrZSgpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2dhbGxlcnlfX2xpa2VfYWN0aXZlJyk7XG4gIH1cbi8vZGVsZXRlIGxpa2VcbiAgZGlzbGlrZSgpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2dhbGxlcnlfX2xpa2VfYWN0aXZlJyk7XG4gIH1cblxuICAvL2NvdW50ZXIgbGlrZXNcbiAgc2V0TGlrZXNDb3VudChyZXMpIHtcbiAgICB0aGlzLl9zZXRMaWtlc0NvdW50LnRleHRDb250ZW50ID0gYCR7cmVzLmxpa2VzLmxlbmd0aH1gO1xuICB9XG5cbiAgX2NoZWNrTElpa2VzKCkge1xuICAgIHRoaXMuX2xpa2VzLmZvckVhY2goKGVsZW1lbnRJZCkgPT4ge1xuICAgICAgaWYgKGVsZW1lbnRJZC5faWQgPT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgICB0aGlzLmxpa2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGlzbGlrZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgLy/QvtCx0YDQsNCx0L7RgtGH0LjQutC4XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdnYWxsZXJ5X19saWtlX2FjdGl2ZScpKSB7XG4gICAgICAgIHRoaXMuX2Rpc2xpa2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xpa2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b25UcmFzaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmQodGhpcy5faWQpO1xuICAgIH0pO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudE1hc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRWaWV3ID0gKCkgPT4ge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKTtcbiAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0ZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X19pdGVtJyk7XG4gICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgfSBlbHNlIGNvbnNvbGUubG9nKCfQkiDQutC70LDRgdGB0LUgQ2FyZCDQvdC1INC90LDQudC00LXQvSAuZ2FsbGVyeV9faXRlbSEnKTtcbiAgICB9IGVsc2VcbiAgICAgIGNvbnNvbGUubG9nKCfQkiDQutC70LDRgdGB0LUgQ2FyZCDQvdC1INC90LDQudC00LXQvSAnICsgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciArICchJyk7XG5cbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2xpa2UnKTtcblxuICAgIC8vIGNvdW50ZXIgbGlrZXNcbiAgICB0aGlzLl9zZXRMaWtlc0NvdW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2NvdW50LWxpa2UnKTtcbiAgICB0aGlzLl9zZXRMaWtlc0NvdW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvblRyYXNoID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2RlbCcpO1xuICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvblRyYXNoLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX2ltYWdlRWxlbWVudE1hc2sgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9faW1nJyk7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50TWFzay5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudE1hc2suYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2NoZWNrTElpa2VzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH07XG59XG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm0pIHtcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICAvL9C60LvQsNGB0YHRi1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2lucHV0RWxlbWVudCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9O1xuXG4gIC8vIHNob3cgYW4gZXJyb3JcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0LCB0ZXh0RXJyb3IpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0RXJyb3I7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgLy9oaWRlIGFuIGVycm9yXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9O1xuXG4gIC8v0L/RgNC+0LLQtdGA0Y/QtdC8INCy0LDQu9C40LTQvdC+0YHRgtGMXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXQpID0+IHtcbiAgICBpZighaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0LCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9O1xuICB9O1xuXG4gIC8v0L/RgNC+0YXQvtC00LjQvNGB0Y8g0L/QviDQstGB0LXQvCDQuNC90L/Rg9GC0LDQvCDQuCDQv9GA0L7QstC10YDRj9C10Lwg0LjRhSDQstCw0LvQuNC00L3QvtGB0YLRjFxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnQuc29tZSgoaW5wdXQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWRcbiAgICB9KTtcbiAgfTtcblxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpXG4gICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gdHJ1ZVxuICB9O1xuXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcylcbiAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfTtcblxuICAvL9GE0YPQvdC60YbQuNGPINC00LvRjyDQutC90L7Qv9C60Lgg0YHQvtGF0YDQsNC90LXQvdC40Y9cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGlmKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXRCdXR0b24oKVxuICAgIH07XG4gIH07XG5cbiAgLy/QtNC+0LHQsNCy0LvRj9C10Lwg0YHQu9GD0YjQsNGC0LXQu9GPXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRFbGVtZW50LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICB9O1xufTtcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7IC8v0YHQtdC70LXQutGC0L7RgCDQv9C+0L/QsNC/0LAsINC90LDRhdC+0LTQuNGCINC/0L7Qv9Cw0L9cbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvL9C+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwXG4gIG9wZW4oKSB7XG4gICAgLy8gdGhpcy5zZXRFdmVudExpc3RlbmVycygpXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7IC8v0LTQvtCx0LDQstC70Y/QtdC8INC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfTtcblxuICAvL9C30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpOyAvL9GD0LTQsNC70Y/QtdC8INC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfTtcblxuICAvL9C70L7Qs9C40LrQsCDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDQutC70LDQstC40YjQtdC5IEVzY1xuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIGNvbnN0IGlzTm90Q29tYmluZWRLZXkgPSAhKGV2dC5jdHJsS2V5IHx8IGV2dC5hbHRLZXkgfHwgZXZ0LnNoaWZ0S2V5KTtcbiAgICAgIGlmIChpc05vdENvbWJpbmVkS2V5ICYmIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19idXR0b24tY2xvc2VcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgICAgLy8g0JzQvtC00LDQu9GM0L3QvtC1INC+0LrQvdC+INGC0LDQutC20LUg0LfQsNC60YDRi9Cy0LDQtdGC0YHRjyDQv9GA0Lgg0LrQu9C40LrQtVxuICAgICAgLy8g0L3QsCDQt9Cw0YLQtdC80L3RkdC90L3Rg9GOINC+0LHQu9Cw0YHRgtGMINCy0L7QutGA0YPQsyDRhNC+0YDQvNGLLlxuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAnO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgY2FsbGJhY2tTdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTsgLy/QvdCw0YHQu9C10LTRg9C10Lwg0LrQu9Cw0YHRgSDQv9C+0L/QsNC/0LBcbiAgICB0aGlzLl9jYWxsYmFja1N1Ym1pdCA9IGNhbGxiYWNrU3VibWl0OyAvL9C60L7Qu9Cx0Y3QuiDRgdCw0LHQvNC40YLQsCDRhNC+0YDQvNGLXG5cbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7IC8v0L3QsNGF0L7QtNC40Lwg0YTQvtGA0LzRg1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTsgLy/QvdCw0YXQvtC00LjQvCDQv9C+0LvRjyDQuNC80L/Rg9GC0L7QslxuICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tc3VibWl0Jyk7IC8v0L3QsNGF0L7QtNC40Lwg0LrQvdC+0LzQutGDINGB0L7RhdGA0LDQvdC10L3QuNGPINC/0L7Qv9Cw0L/QsFxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKSAgLy8gPD09PSDQstC+0YIg0Y3RgtC+INC30LDQv9GD0YHQutCw0LXRgiDRgNC+0LTQuNGC0LXQu9GM0YHQutC40LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQuFxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCByZXBsYWNlbWVudFRleHQgPSBldmVudC5zdWJtaXR0ZXIudGV4dENvbnRlbnQ7XG4gICAgICAvLyDQodC80LXQvdCwINGC0LXQutGB0YLQsCDQutC90L7Qv9C60Lgg0L/RgNC4INGB0L7RhdGA0LDQvdC10L3QuNC1INC00LDQvdC90YvRhVxuICAgICAgZXZlbnQuc3VibWl0dGVyLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xuICAgICAgdGhpcy5fY2FsbGJhY2tTdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSlcbiAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jbG9zZSgpKVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgZXZlbnQuc3VibWl0dGVyLnRleHRDb250ZW50ID0gcmVwbGFjZW1lbnRUZXh0O1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vX2dldElucHV0VmFsdWVzINGB0L7QsdC40YDQsNC10YIg0LTQsNC90L3Ri9C1INCy0YHQtdGFINC/0L7Qu9C10Lkg0YTQvtGA0LzRi1xuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgdmFsdWVzID0ge307IC8v0YHQvtC30LTQsNC10Lwg0L/Rg9GB0YLQvtC5INC+0LHRitC10LrRglxuICAgIC8v0LTQvtCx0LDQstC70Y/QtdC8INC30L3QsNGH0LXQvdC40LUg0LLRgdC10YUg0L/QvtC70LXQuVxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICAvL9C/0LXRgNC10LfQsNC/0LjRgdGL0LLQsNC10Lwg0YDQvtC00LjRgtC10LvRjNGB0LrQuNC5INC80LXRgtC+0LQgY2xvc2Ug0LTQu9GPINGB0LHRgNC+0YHQsCDRhNC+0YDQvNGLXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG4vL9C40LzQv9C+0YDRgiDQutC+0L3RgdGC0LDQvdGCXG5pbXBvcnQge1xuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBwcm9maWxlQnV0dG9uLFxuICBwb3B1cENvbmZpZyxcbiAgYnV0dG9uT3BlbmVGb3JtQ2FyZCxcbiAgcHJvZmlsZUVkaXRBdmF0YXJCdXR0b24sXG5cbiAgcHJvZmlsZVRpdGxlLFxuICBwcm9maWxlSW5mbyxcbiAgcHJvZmlsZUF2YXRhcixcbiAgZm9ybUVkaXRQcm9maWxlLFxuICBmb3JtQWRkUHJvZmlsZSxcbiAgZm9ybVVwZGF0ZUF2YXRhcixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vL9C40LzQv9C+0YDRgiDQutC70LDRgdGB0L7QslxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aENvbmZpcm1hdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxubGV0IHVzZXJJZDsgLy92YXJpYWJsZSBmb3IgdXNlclxuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYwXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImVhOTk2ZWM0LTM1ODYtNDllYy05OWNmLTQ2YzU2ZTYzN2E4OVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbi8vdGhlIGZ1bmN0aW9uIG9mIGNyZWF0aW5nIGNhcmQgZWxlbWVudHNcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgZGF0YSxcbiAgICBcIiN0ZW1wbGF0ZS1uZXctaW1nXCIsXG4gICAgb3BlblBvcHVwSW1hZ2UsXG4gICAgdXNlcklkLFxuICAgIGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLmFkZExpa2UoZGF0YS5faWQpO1xuICAgICAgICBjYXJkLmxpa2UoKTtcbiAgICAgICAgY2FyZC5zZXRMaWtlc0NvdW50KHJlc3BvbnNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycm9yfWApO1xuICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucmVtb3ZlTGlrZShkYXRhLl9pZCk7XG4gICAgICAgIGNhcmQuZGlzbGlrZSgpO1xuICAgICAgICBjYXJkLnNldExpa2VzQ291bnQocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSxcbiAgICAoKSA9PiB7XG4gICAgICBwb3B1cENvbmZpcm1hdGlvbi5vcGVuKGNhcmQpO1xuICAgIH1cbiAgKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG4vL29wZW4gYmlnIGltZ1xuZnVuY3Rpb24gb3BlblBvcHVwSW1hZ2UobmFtZSwgbGluaykge1xuICBwb3B1cEltYWdlLm9wZW4obmFtZSwgbGluayk7XG59XG5cbi8vIGZvcm0gZm9yIGNoYW5nZWQgcHJvZmlsZVxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlU3VibWl0Rm9ybUVkaXRQcm9maWxlKGRhdGEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyUHJvZmlsZSA9IGF3YWl0IGFwaS5lZGl0UHJvZmlsZVVzZXJBcGkoZGF0YSk7XG4gICAgdXNlci5zZXRVc2VySW5mbyh1c2VyUHJvZmlsZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJvcn1gKTtcbiAgfVxufVxuXG4vLyBmb3JtIGZvciBhZGQgbmV3IGNhcmRcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEZvcm1BZGRDYXJkKGRhdGEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBuZXdDYXJkID0gYXdhaXQgYXBpLmNyZWF0ZU5ld0NhcmRBcGkoZGF0YSk7XG4gICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKG5ld0NhcmQpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycm9yfWApO1xuICB9XG59O1xuXG4vLyBmb3JtIGZvciBjaGFuZ2luZyBhdmF0YXJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEZvcm1VcGRhdGVBdmF0YXIoZGF0YSkge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJQcm9maWxlID0gYXdhaXQgYXBpLnVwZGF0ZVByb2ZpbGVVc2VyQXZhdGFyKGRhdGEpO1xuICAgIHVzZXIuc2V0VXNlckluZm8odXNlclByb2ZpbGUpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyb3J9YCk7XG4gIH1cbn07XG5cbi8vY3JlYXRlIGFuIGluc3RhbmNlIG90IHRoZSBjbGFzcyBwb3B1cHdpdGhmb3JtIGZvciBlYWNoIHBvcHVwXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwQ29uZmlnLnBvcHVwSW1hZ2VTZWxlY3Rvcik7XG5jb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQ29uZmlnLnBvcHVwQWRkQ2FyZFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtQWRkQ2FyZCk7XG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cENvbmZpZy5wb3B1cEVkaXRTZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybUVkaXRQcm9maWxlKTtcbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBDb25maWcucG9wdXBVcGRhdGVBdmF0YXJTZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybVVwZGF0ZUF2YXRhcik7XG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZTogcHJvZmlsZVRpdGxlLFxuICBhYm91dDogcHJvZmlsZUluZm8sXG4gIGF2YXRhcjogcHJvZmlsZUF2YXRhcixcbn0pO1xuXG5cbnByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcbiAgXCJjbGlja1wiLFxuICAoKSA9PiB7XG4gICAgcG9wdXBFZGl0Lm9wZW4oKTtcbiAgICBwb3B1cEVkaXQuc2V0SW5wdXRWYWx1ZSh1c2VyLmdldFVzZXJJbmZvKCkpO1xuICAgIGZvcm1FZGl0VmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgfSxcbiAgZmFsc2Vcbik7XG5cbnByb2ZpbGVFZGl0QXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gIFwiY2xpY2tcIixcbiAgKCkgPT4ge1xuICAgIHBvcHVwQXZhdGFyLm9wZW4oKTtcbiAgICBmb3JtQXZhdGFyVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgfSxcbiAgZmFsc2Vcbik7XG5cbmJ1dHRvbk9wZW5lRm9ybUNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgXCJjbGlja1wiLFxuICAoKSA9PiB7XG4gICAgcG9wdXBBZGQub3BlbigpO1xuICAgIGZvcm1DYXJkVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgfSxcbiAgZmFsc2Vcbik7XG5cbmNvbnN0IGZvcm1FZGl0VmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVkaXRQcm9maWxlKTsgLy/QtNC70Y8g0LLRi9C30L7QstCwINCy0LDQu9C40LTQsNGG0LjQuCDQv9GA0L7RhNC40LvRj1xuY29uc3QgZm9ybUNhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtQWRkUHJvZmlsZSk7IC8v0LTQu9GPINCy0YvQt9C+0LLQsCDQstCw0LvQuNC00LDRhtC40Lgg0LrQsNGA0YLQuNC90LrQuFxuXG5jb25zdCBmb3JtQXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGZvcm1VcGRhdGVBdmF0YXJcbik7XG5cbmZvcm1FZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsgLy8g0LLRi9C30YvQstCw0LXQvCDQstCw0LvQuNC00LDRhtC40Y4g0L/QvtC/0LDQv9CwINC/0YDQvtGE0LjQu9GPXG5mb3JtQ2FyZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7IC8v0LLRi9C30YvQstCw0LXQvCDQstCw0LvQuNC00LDRhtC40Y4g0L/QvtC/0LDQv9CwINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0LjQvdC60LhcbmZvcm1BdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwb3B1cENvbmZpcm1hdGlvbiA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXG4gIHBvcHVwQ29uZmlnLnBvcHVwRGVsZXRlU2VsZWN0b3IsXG4gIGFzeW5jIChjYXJkKSA9PiB7XG4gICAgYXBpXG4gICAgICAucmVtb3ZlQ2FyZChjYXJkLl9pZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC5yZW1vdmUoKTtcbiAgICAgICAgcG9wdXBDb25maXJtYXRpb24uY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycm9yfWApKTtcbiAgfVxuKTtcblxucG9wdXBDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vINCX0LDQs9GA0YPQt9C60LAg0LrQsNGA0YLQvtGH0LXQuiDRgSDRgdC10YDQstC10YDQsFxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG5cbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZCk7XG4gICAgfSxcbiAgfSxcbiAgXCIuZ2FsbGVyeVwiXG4pO1xuXG4vLyDQntGC0YDQuNGB0L7QstC60LAg0LrQsNGA0YLQvtGH0LXQuiDRgSDRgdC10YDQstC10YDQsCArINC+0YLRgNC40YHQvtCy0LrQsCDQtNCw0L3QvdGL0YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG5Qcm9taXNlLmFsbChbYXBpLmdldFJlYWxVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxuICAudGhlbigoW3VzZXJQcm9maWxlLCBjYXJkc10pID0+IHtcbiAgICB1c2VyLnNldFVzZXJJbmZvKHVzZXJQcm9maWxlKTtcbiAgICB1c2VySWQgPSB1c2VyUHJvZmlsZS5faWQ7XG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMoY2FyZHMpO1xuICB9KVxuXG4gIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyb3J9YCkpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIC8v0L/RgNC+0LLQtdGA0LrQsCDQvtGC0LLQtdGC0LAg0YEg0YHQtdGA0LLQtdGA0LBcbiAgX2hhbmRsZVJlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzLmpzb24oKSk7XG4gICAgfVxuXG4gICAgLy8gINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgLy/RgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INC/0YDQvtGE0LjQu9GPXG4gIGFzeW5jIGVkaXRQcm9maWxlVXNlckFwaShkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogZGF0YS5hYm91dCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXNwb25zZSk7XG4gIH1cblxuICAvLyDQt9Cw0LPRgNGD0LfQutCwINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDRgSDRgdC10YDQstC10YDQsFxuICBhc3luYyBnZXRSZWFsVXNlckluZm8oKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgfVxuXG4gIC8v0LfQsNCz0YDRg9C30LrQsCDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwXG4gIGFzeW5jIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICB9XG5cbiAgLy/QtNC+0LHQsNCy0LvQtdC90LjQtSDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60Lgg0YEg0YHQtdGA0LLQtdGA0LBcbiAgYXN5bmMgY3JlYXRlTmV3Q2FyZEFwaShkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgfVxuXG4gIC8v0YPQtNCw0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4XG4gIGFzeW5jIHJlbW92ZUNhcmQoY2FyZElkKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXNwb25zZSk7XG4gIH1cblxuICAvL9GB0YLQsNCy0LjQvCDQu9Cw0LnQulxuICBhc3luYyBhZGRMaWtlKGNhcmRJZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICB9XG5cbiAgLy8g0L/QvtGB0YLQsNC90L7QstC60LAg0Lgg0YHQvdGP0YLQuNC1INC70LDQudC60LAg0YEg0LrQsNGA0YLQvtGH0LrQuFxuICBhc3luYyByZW1vdmVMaWtlKGNhcmRJZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICB9XG5cbiAgLy/QvtCx0L3QvtCy0LvQtdC90LjQtSDQsNCy0LDRgtCw0YDQsFxuICBhc3luYyB1cGRhdGVQcm9maWxlVXNlckF2YXRhcihkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICB9XG59O1xuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwJztcblxuLy/QstGB0YLQsNCy0LvRj9C10Lwg0LIg0L/QvtC/0LDQvyDQutCw0YDRgtC40L3QutGDXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTsgLy/RgdC10LvQtdC60YLQvtGAINC/0L7Qv9Cw0L/QsFxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltZycpIC8v0L3QsNGF0L7QtNC40Lwg0YTQvtGA0LzRg1xuICAgIHRoaXMuX3BvcHVwSW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fdGl0bGUtaW1nJylcbiAgfTtcblxuLy/Qv9C10YDQtdC30LDQv9C40YHRi9Cy0LDQtdC8INGA0L7QtNC40YLQtdC70YzRgdC60LjQuSDQvNC10YLQvtC0XG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX3BvcHVwSW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7IC8v0LLRgdGC0LDQstC70Y/QtdC8INC90LDQt9Cy0LDQvdC40LUg0LrQsNGA0YLQuNC90LrQuFxuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluazsgLy/QstGB0YLQsNCy0LvRj9C10Lwg0YHRgdGL0LvQutGDINC90LAg0LrQsNGA0YLQuNC90LrRg1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTsgLy8g0LLRgdGC0LDQstC70Y/QtdC8INGC0LXQutGB0YIsINC10YHQu9C4INC60LDRgNGC0LjQvdC60LAg0L3QtSDQt9Cw0LPRgNGD0LfQuNC70LDRgdGMXG4gICAgc3VwZXIub3BlbigpO1xuICB9O1xufTtcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XG4gICAgdGhpcy5fZGF0YSA9IHtcbiAgICAgIG5hbWU6IG5hbWUudGV4dENvbnRlbnQsIC8v0Y3Qu9C10LzQtdC90YIg0LjQvNC10L3QuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgICAgIGFib3V0OiBhYm91dC50ZXh0Q29udGVudCwgLy/RjdC70LXQvNC10L3RgiDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDRgdC10LHQtVxuICAgICAgYXZhdGFyOiBhdmF0YXIudGV4dENvbnRlbnQsIC8vYXZhdGFyIGVsZW1lbnRcbiAgICB9O1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2Fib3V0ID0gYWJvdXQ7XG4gICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyO1xuICB9XG5cbiAgLy/QstC+0LfQstGA0LDRidCw0LXRgiDQvtCx0YrQtdC60YIg0YEg0LTQsNC90L3Ri9C80Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLlxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fZGF0YS5uYW1lLFxuICAgICAgYWJvdXQ6IHRoaXMuX2RhdGEuYWJvdXQsXG4gICAgICBhdmF0YXI6IHRoaXMuX2RhdGEuYXZhdGFyLFxuICAgIH07XG4gIH07XG5cbiAgLy/RgdC+0LHQuNGA0LDQtdC8INC40L3RhNC+0YDQvNCw0YbQuNGOINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgdGhpcy5fZGF0YS5uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2RhdGEuYWJvdXQgPSBkYXRhLmFib3V0O1xuICAgIHRoaXMuX2RhdGEuYXZhdGFyID0gZGF0YS5hdmF0YXI7XG4gICAgaWYgKGRhdGEubmFtZSkge1xuICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5hYm91dCkge1xuICAgICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLmFib3V0O1xuICAgIH1cblxuICAgIC8v0LTQvtCx0LDQstC70Y/QtdC8INCw0LLQsNGC0LDRgFxuICAgIGlmIChkYXRhLmF2YXRhcikge1xuICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IHRoaXMuX2RhdGEuYXZhdGFyO1xuICAgICAgdGhpcy5fYXZhdGFyLmFsdCA9IHRoaXMuX2RhdGEubmFtZTtcbiAgICB9XG4gIH07XG59O1xuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwLmpzJ1xuXG4vL9C/0L7Qv9Cw0L8g0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQtdC6XG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCwgaGFuZGxlU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXApO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgfVxuXG4gIG9wZW4oY2FyZCkge1xuICAgIHRoaXMuX2NhcmQgPSBjYXJkO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCkgIC8vIDw9PT0g0LLQvtGCINGN0YLQviDQt9Cw0L/Rg9GB0LrQsNC10YIg0YDQvtC00LjRgtC10LvRjNGB0LrQuNC1INC+0LHRgNCw0LHQvtGC0YfQuNC60LhcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fY2FyZCk7XG4gICAgfSk7XG4gIH1cbn07XG4iLCIvLyDQutC70LDRgdGBIFNlY3Rpb24gLCDQvtGC0LLQtdGH0LDQtdGCINC30LAg0L7RgtGA0LjRgdC+0LLQutGDINGN0LvQtdC80LXQvdGC0L7QsiDQvdCwINGB0YLRgNCw0L3QuNGG0LVcbmV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICBhZGRJdGVtID0gKGl0ZW0pID0+IHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcbiAgfTtcblxuICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgIGl0ZW1zLnJldmVyc2UoKS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cblxuLy8g0KMg0LrQu9Cw0YHRgdCwIFNlY3Rpb24g0L3QtdGCINGB0LLQvtC10Lkg0YDQsNC30LzQtdGC0LrQuC4g0J7QvSDQv9C+0LvRg9GH0LDQtdGCINGA0LDQt9C80LXRgtC60YMg0YfQtdGA0LXQtyDRhNGD0L3QutGG0LjRji3QutC+0LvQsdGN0Log0Lgg0LLRgdGC0LDQstC70Y/QtdGCINC10ZEg0LIg0LrQvtC90YLQtdC50L3QtdGALlxuIl0sIm5hbWVzIjpbInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlSW5mbyIsInByb2ZpbGVBdmF0YXIiLCJwcm9maWxlRWRpdEF2YXRhckJ1dHRvbiIsImJ1dHRvbk9wZW5lRm9ybUNhcmQiLCJmb3JtRWRpdFByb2ZpbGUiLCJmb3JtcyIsImVkaXRGb3JtIiwiZm9ybUFkZFByb2ZpbGUiLCJhZGRGb3JtIiwiZm9ybVVwZGF0ZUF2YXRhciIsImVkaXRBdmF0YXJGb3JtIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ1c2VySWQiLCJsaWtlIiwiZGlzbGlrZSIsImRlbGV0ZUNhcmQiLCJ0aGlzIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2xpa2VzIiwibGlrZXMiLCJfaWQiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfb3duZXJJZCIsIm93bmVyIiwiX3VzZXJJZCIsIl9saWtlIiwiX2Rpc2xpa2UiLCJfZGVsZXRlQ2FyZCIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic2V0TGlrZXNDb3VudCIsInJlcyIsIl9zZXRMaWtlc0NvdW50IiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJfY2hlY2tMSWlrZXMiLCJmb3JFYWNoIiwiZWxlbWVudElkIiwiX2NhcmRFbGVtZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiX2RlbGV0ZUJ1dHRvblRyYXNoIiwiX2ltYWdlRWxlbWVudE1hc2siLCJnZXRWaWV3IiwidGVtcGxhdGUiLCJlbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNvbnNvbGUiLCJsb2ciLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybSIsIl9mb3JtIiwiX2Zvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfaW5wdXRFbGVtZW50IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dCIsInRleHRFcnJvciIsImVycm9yRWxlbWVudCIsImlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsImN0cmxLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZSIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJjYWxsYmFja1N1Ym1pdCIsInN1cGVyIiwiX2NhbGxiYWNrU3VibWl0IiwiX2lucHV0RWxlbWVudHMiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicmVwbGFjZW1lbnRUZXh0Iiwic3VibWl0dGVyIiwiX2dldElucHV0VmFsdWVzIiwidGhlbiIsImZpbmFsbHkiLCJ2YWx1ZXMiLCJ2YWx1ZSIsInNldElucHV0VmFsdWUiLCJyZXNldCIsImFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfaGFuZGxlUmVzcG9uc2UiLCJvayIsIlByb21pc2UiLCJyZXNvbHZlIiwianNvbiIsInJlamVjdCIsInN0YXR1cyIsImFzeW5jIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJjYXJkSWQiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiY3JlYXRlQ2FyZCIsImNhcmQiLCJvcGVuUG9wdXBJbWFnZSIsImFkZExpa2UiLCJlcnJvciIsInJlbW92ZUxpa2UiLCJwb3B1cENvbmZpcm1hdGlvbiIsInBvcHVwSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cEltYWdlVGl0bGUiLCJwb3B1cEFkZCIsIm5ld0NhcmQiLCJjcmVhdGVOZXdDYXJkQXBpIiwiY2FyZExpc3QiLCJhZGRJdGVtIiwicG9wdXBFZGl0IiwidXNlclByb2ZpbGUiLCJlZGl0UHJvZmlsZVVzZXJBcGkiLCJ1c2VyIiwic2V0VXNlckluZm8iLCJwb3B1cEF2YXRhciIsInVwZGF0ZVByb2ZpbGVVc2VyQXZhdGFyIiwiX2RhdGEiLCJfYWJvdXQiLCJfYXZhdGFyIiwiZ2V0VXNlckluZm8iLCJmb3JtRWRpdFZhbGlkYXRvciIsImZvcm1BdmF0YXJWYWxpZGF0b3IiLCJmb3JtQ2FyZFZhbGlkYXRvciIsInBvcHVwIiwiaGFuZGxlU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsIl9jYXJkIiwicmVtb3ZlQ2FyZCIsImNhdGNoIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiaXRlbXMiLCJyZXZlcnNlIiwiYWxsIiwiZ2V0UmVhbFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHMiXSwic291cmNlUm9vdCI6IiJ9